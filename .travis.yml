language: rust
matrix:
  include:
    - rust: beta
    - rust: stable

cache:
  apt: true
  directories:
    - target/debug/deps
    - target/debug/build

script:
  - cargo build
  - cargo test

after_success:
  - '[ $TRAVIS_PULL_REQUEST = false ] && [ $TRAVIS_RUST_VERSION = stable ] && { [ "$TRAVIS_TAG" != "" ] || [ "$TRAVIS_BRANCH" == "master" ]; } && ./.travis/docs.sh'
